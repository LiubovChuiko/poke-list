import React from 'react';
import {useNavigate} from 'react-router-dom';
import {TextInput} from 'ui/components';
import './searchform.scss';

interface FormElements extends HTMLFormControlsCollection {
  search: HTMLInputElement;
}
interface SearchFormElement extends HTMLFormElement {
  readonly elements: FormElements;
}

export default function SearchForm() {
  const [currFilter, setCurrFilter] = React.useState(undefined);
  const navigate = useNavigate();

  const handleSearch = React.useCallback(
    async (event: React.FormEvent<SearchFormElement>) => {
      event.preventDefault();
      const name = event.currentTarget.elements.search.value;
      navigate(`/pokemon/${name}`, {state: {name: name}});
    },
    [navigate],
  );

  return (
    <section className="form-section">
      <form id="user-search" className="form" onSubmit={handleSearch}>
        <TextInput
          type="search"
          id="search"
          name="search"
          value={currFilter}
          onChange={e => {
            setCurrFilter(e.target.value);
          }}
          placeholder="Find me..."
          LeftComponent={
            <button type="button" className="left-button">
              <svg xmlns="http://www.w3.org/2000/svg" fill="#3973AC" viewBox="0 0 64 64">
                <path d="M 62.751953 0.33789062 C 62.674719 0.33115625 62.596328 0.33395312 62.517578 0.34570312 C 56.081578 1.2947031 48.430781 5.6717812 42.050781 12.050781 C 41.106781 12.994781 40.178109 13.997063 39.287109 15.039062 C 34.558109 13.659063 29.441891 13.659063 24.712891 15.039062 C 23.820891 13.997063 22.893219 12.994781 21.949219 12.050781 C 15.569219 5.6717812 7.9184219 1.2956563 1.4824219 0.34765625 C 1.1674219 0.30065625 0.85290625 0.40490625 0.62890625 0.62890625 C 0.40490625 0.85290625 0.30065625 1.1694219 0.34765625 1.4824219 C 1.1726562 7.0764219 4.5872969 13.587766 9.6542969 19.384766 C 9.6652969 19.398766 9.6765 19.410828 9.6875 19.423828 C 10.4395 20.282828 11.228781 21.127219 12.050781 21.949219 C 12.265781 22.164219 12.482219 22.376937 12.699219 22.585938 C 8.3722187 27.374938 6 33.519 6 40 C 6 40.871 6.0494375 41.778172 6.1484375 42.701172 C 6.1844375 43.035172 6.0487344 43.304703 5.9277344 43.470703 C 4.6487344 45.226703 4 47.086 4 49 C 4 57.411 16.299 64 32 64 C 47.701 64 60 57.411 60 49 C 60 47.087 59.352172 45.228563 58.076172 43.476562 C 57.956172 43.310563 57.820469 43.041031 57.855469 42.707031 C 57.951469 41.798031 58 40.888 58 40 C 58 33.519 55.628781 27.374938 51.300781 22.585938 C 51.518781 22.376938 51.734219 22.165219 51.949219 21.949219 C 52.771219 21.127219 53.557547 20.282828 54.310547 19.423828 C 54.322547 19.409828 54.334703 19.396812 54.345703 19.382812 C 59.412703 13.585812 62.828344 7.0744688 63.652344 1.4804688 C 63.698344 1.1674688 63.594094 0.85290625 63.371094 0.62890625 C 63.203094 0.46090625 62.983656 0.35809375 62.751953 0.33789062 z M 2.5839844 2.5839844 C 4.5909844 3.0299844 6.7056562 3.8168125 8.8476562 4.8828125 C 8.2956562 6.8408125 8 8.89 8 11 C 8 12.17 8.1073906 13.312547 8.2753906 14.435547 C 5.4193906 10.455547 3.4179844 6.3319844 2.5839844 2.5839844 z M 61.416016 2.5839844 C 60.582016 6.3319844 58.580609 10.455547 55.724609 14.435547 C 55.892609 13.312547 56 12.17 56 11 C 56 8.89 55.704344 6.8408125 55.152344 4.8828125 C 57.294344 3.8168125 59.409016 3.0299844 61.416016 2.5839844 z M 10.654297 5.84375 C 14.038297 7.76775 17.435156 10.363844 20.535156 13.464844 C 21.589156 14.518844 22.623422 15.652078 23.607422 16.830078 C 23.868422 17.142078 24.295687 17.264578 24.679688 17.142578 C 29.409688 15.627578 34.589312 15.627578 39.320312 17.142578 C 39.706313 17.264578 40.131578 17.143078 40.392578 16.830078 C 41.376578 15.651078 42.410844 14.518844 43.464844 13.464844 C 46.565844 10.364844 49.963656 7.76775 53.347656 5.84375 C 53.773656 7.49875 54 9.224 54 11 C 54 13.52 53.540641 16.02 52.681641 18.25 C 51.995641 19.026 51.281156 19.789156 50.535156 20.535156 C 50.097156 20.973156 49.654031 21.3975 49.207031 21.8125 C 49.010031 21.9965 48.896625 22.252484 48.890625 22.521484 C 48.883625 22.790484 48.985828 23.050187 49.173828 23.242188 C 53.575828 27.753187 56 33.705 56 40 C 56 40.818 55.954234 41.658047 55.865234 42.498047 C 55.856234 42.585047 55.865281 42.672766 55.863281 42.759766 C 53.529281 43.937766 52 46.345 52 49 C 52 50.229 52.322594 51.436141 52.933594 52.494141 C 53.119594 52.815141 53.454781 52.994141 53.800781 52.994141 C 53.969781 52.994141 54.142781 52.952328 54.300781 52.861328 C 54.778781 52.585328 54.942016 51.972141 54.666016 51.494141 C 54.230016 50.740141 54 49.878 54 49 C 54 47.21 54.971422 45.5735 56.482422 44.6875 C 57.487422 46.0815 58 47.531 58 49 C 58 56.047 46.093 62 32 62 C 17.907 62 6 56.047 6 49 C 6 47.532 6.5125781 46.0805 7.5175781 44.6875 C 9.0285781 45.5725 10 47.211 10 49 C 10 49.88 9.7690312 50.743047 9.3320312 51.498047 C 9.0550313 51.976047 9.2173125 52.589234 9.6953125 52.865234 C 9.8533125 52.956234 10.025313 53 10.195312 53 C 10.540313 53 10.8775 52.821953 11.0625 52.501953 C 11.6765 51.442953 12 50.231 12 49 C 12 46.348 10.472625 43.938719 8.140625 42.761719 C 8.139625 42.670719 8.1467187 42.580234 8.1367188 42.490234 C 8.0457187 41.637234 8 40.8 8 40 C 8 33.705 10.424172 27.753187 14.826172 23.242188 C 15.014172 23.050187 15.116375 22.790484 15.109375 22.521484 C 15.103375 22.252484 14.989969 21.9965 14.792969 21.8125 C 14.346969 21.3975 13.903844 20.973156 13.464844 20.535156 C 12.718844 19.789156 12.003359 19.026 11.318359 18.25 C 10.459359 16.02 10 13.52 10 11 C 10 9.224 10.227297 7.49875 10.654297 5.84375 z M 32 19 C 31.448 19 31 19.448 31 20 L 31 22 C 31 22.552 31.448 23 32 23 C 32.552 23 33 22.552 33 22 L 33 20 C 33 19.448 32.552 19 32 19 z M 26.572266 19.740234 C 26.443469 19.722469 26.309781 19.729375 26.175781 19.765625 C 25.642781 19.908625 25.32575 20.456234 25.46875 20.990234 L 25.986328 22.923828 C 26.106328 23.370828 26.509172 23.664062 26.951172 23.664062 C 27.036172 23.664062 27.123938 23.654859 27.210938 23.630859 C 27.743938 23.487859 28.060969 22.938297 27.917969 22.404297 L 27.400391 20.472656 C 27.293141 20.072156 26.958656 19.793531 26.572266 19.740234 z M 37.425781 19.740234 C 37.03925 19.793531 36.704906 20.072156 36.597656 20.472656 L 36.080078 22.404297 C 35.938078 22.938297 36.254109 23.488859 36.787109 23.630859 C 36.874109 23.653859 36.961875 23.664063 37.046875 23.664062 C 37.488875 23.664062 37.892719 23.370828 38.011719 22.923828 L 38.529297 20.990234 C 38.672297 20.456234 38.355266 19.908625 37.822266 19.765625 C 37.688016 19.729375 37.554625 19.722469 37.425781 19.740234 z M 21.125 21.886719 C 20.996266 21.902812 20.869 21.944422 20.75 22.013672 C 20.271 22.289672 20.108766 22.902859 20.384766 23.380859 L 21.384766 25.111328 C 21.570766 25.432328 21.905953 25.611328 22.251953 25.611328 C 22.420953 25.611328 22.593 25.569516 22.75 25.478516 C 23.229 25.202516 23.391234 24.589328 23.115234 24.111328 L 22.115234 22.380859 C 21.907484 22.021609 21.511203 21.838438 21.125 21.886719 z M 42.873047 21.888672 C 42.486328 21.840766 42.091766 22.022359 41.884766 22.380859 L 40.884766 24.113281 C 40.608766 24.590281 40.771 25.201516 41.25 25.478516 C 41.407 25.569516 41.579047 25.613281 41.748047 25.613281 C 42.094047 25.613281 42.430234 25.434281 42.615234 25.113281 L 43.615234 23.380859 C 43.891234 22.902859 43.728 22.291625 43.25 22.015625 C 43.1305 21.946625 43.001953 21.904641 42.873047 21.888672 z M 20 35 C 17.794 35 16 36.794 16 39 C 16 41.206 17.794 43 20 43 C 22.206 43 24 41.206 24 39 C 24 36.794 22.206 35 20 35 z M 44 35 C 41.794 35 40 36.794 40 39 C 40 41.206 41.794 43 44 43 C 46.206 43 48 41.206 48 39 C 48 36.794 46.206 35 44 35 z M 20 37 C 21.103 37 22 37.897 22 39 C 22 40.103 21.103 41 20 41 C 18.897 41 18 40.103 18 39 C 18 37.897 18.897 37 20 37 z M 44 37 C 45.103 37 46 37.897 46 39 C 46 40.103 45.103 41 44 41 C 42.897 41 42 40.103 42 39 C 42 37.897 42.897 37 44 37 z M 30.080078 42 C 29.304078 42 28.613344 42.435766 28.277344 43.134766 C 27.941344 43.833766 28.032578 44.643047 28.517578 45.248047 L 30.4375 47.648438 C 30.5905 47.839438 30.778422 47.988375 30.982422 48.109375 C 30.900422 49.841375 28.927 51 26 51 C 23.792 51 22.765625 50.398063 21.640625 49.289062 C 21.247625 48.901063 20.615563 48.907781 20.226562 49.300781 C 19.838562 49.693781 19.842328 50.326844 20.236328 50.714844 C 21.627328 52.086844 23.139 53 26 53 C 26.741 53 27.412297 52.935172 28.029297 52.826172 C 28.181297 55.153172 29.894 57 32 57 C 34.106 57 35.818703 55.153172 35.970703 52.826172 C 36.587703 52.935172 37.259 53 38 53 C 40.861 53 42.374625 52.084891 43.765625 50.712891 C 44.158625 50.324891 44.161438 49.692828 43.773438 49.298828 C 43.385438 48.905828 42.751375 48.902062 42.359375 49.289062 C 41.235375 50.399062 40.208 51 38 51 C 35.073 51 33.098625 49.841375 33.015625 48.109375 C 33.219625 47.988375 33.4095 47.839438 33.5625 47.648438 L 35.480469 45.248047 C 35.965469 44.642047 36.058656 43.831813 35.722656 43.132812 C 35.386656 42.433813 34.695922 42 33.919922 42 L 30.080078 42 z M 30.080078 44 L 33.919922 44 L 32.003906 46.400391 L 32 46.398438 L 30.080078 44 z M 32 50.742188 C 32.476 51.322187 33.128844 51.829797 33.964844 52.216797 C 33.973844 52.312797 34 52.403 34 52.5 C 34 53.878 33.103 55 32 55 C 30.897 55 30 53.878 30 52.5 C 30 52.403 30.026156 52.312797 30.035156 52.216797 C 30.871156 51.829797 31.525 51.322187 32 50.742188 z" />
              </svg>
            </button>
          }
          RightComponent={
            <button type="submit" className="right-button">
              <svg
                className=""
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor">
                <path
                  stroke="currentColor"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth="2"
                  d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
                />
              </svg>
            </button>
          }
        />
      </form>
    </section>
  );
}
